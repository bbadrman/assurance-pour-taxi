{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!
{% endblock %}

{% block body %}
	{% for message in app.flashes('success') %}
		<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
			{{ message }}
		</div>
	{% endfor %}


	<!-- Hero Section -->
	<section
		class="py-20 lg:py-32 bg-gradient-to-br from-light via-surfaceHover to-light hero-pattern relative overflow-hidden">
		<!-- Background decoration -->
		<div class="absolute inset-0 scanlines-bg opacity-30"></div>
		<div class="absolute top-10 left-10 floating-animation">
			<i class="fas fa-taxi text-yellow-600 text-6xl opacity-30"></i>
		</div>
		<div class="absolute bottom-10 right-10 floating-animation" style="animation-delay: -2s;">
			<i class="fas fa-taxi text-yellow-700 text-8xl opacity-25"></i>
		</div>


		<!-- Content Section -->
		<section class="py-20 bg-surface">
			<div class="container mx-auto px-4">
				<div class="max-w-6xl mx-auto">
					<div
						class="fade-in">

						<!-- CTA Section -->
						<div class="bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-3xl p-12 text-dark text-center relative overflow-hidden">
							<div class="absolute inset-0 bg-scanlines opacity-10"></div>
							<div class="relative">
								<div class="w-16 h-16 bg-dark/20 rounded-2xl mx-auto mb-6 flex items-center justify-center">
									<i class="fas fa-calculator text-3xl text-dark"></i>
								</div>
								<h2 class="text-4xl font-bold mb-6 text-dark">Votre demande de tarif est bien prise en compte</h2>
								<p class="text-xl mb-8 text-dark/90 max-w-3xl mx-auto leading-relaxed">
									Vous recevrez notre offre personnalisée très bientôt.
								</p>
								<a href="https://assurance-pour-taxi.ddev.site/" class="inline-block px-6 py-3 bg-accent text-dark font-medium rounded-full shadow-md hover:bg-accent/90 transition">
									Revenir à l'accueil
								</a>

							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

	</section>
	<!-- Scripts -->

	<script>
		function showDiv(select) {
if (select.value == 'oui') {
document.getElementById('hidden_div').style.display = "block";
} else {
document.getElementById('hidden_div').style.display = "none";
}
}

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
anchor.addEventListener('click', function (e) {
e.preventDefault();
const target = document.querySelector(this.getAttribute('href'));
if (target) {
target.scrollIntoView({behavior: 'smooth', block: 'start'});
}
});
});

// Soumission avec AJAX pour garder l'animation
document.getElementById('contactForm').addEventListener('submit', function (e) {
e.preventDefault(); // On peut garder preventDefault avec AJAX

const button = this.querySelector('button[type="submit"]');
const originalHTML = button.innerHTML;
const form = this;

// Animation du bouton
button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Traitement en cours...';
button.disabled = true;

// Soumission AJAX
fetch(form.action, {
method: 'POST',
body: new FormData(form),
headers: {
'X-Requested-With': 'XMLHttpRequest'
}
}).then(response => {
if (response.ok) { // Succès
button.innerHTML = '<i class="fas fa-check mr-2"></i>Devis envoyé avec succès !';
button.className = button.className.replace('from-yellow-400 to-yellow-500', 'from-green-400 to-green-500');

setTimeout(() => { // Redirection ou reset du formulaire
window.location.reload(); // ou window.location.href = '/success'
}, 2000);
} else {
throw new Error('Erreur de soumission');
}
}).catch(error => { // Erreur
button.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Erreur, veuillez réessayer';
button.className = button.className.replace('from-yellow-400 to-yellow-500', 'from-red-400 to-red-500');

setTimeout(() => {
button.innerHTML = originalHTML;
button.className = button.className.replace('from-red-400 to-red-500', 'from-yellow-400 to-yellow-500');
button.disabled = false;
}, 3000);
});
});
	</script>
	<!-- Cookie Scripts -->
	<script>
		document.addEventListener('DOMContentLoaded', function (event) {
if (document.cookie.indexOf('aksamPerformance') < 0) { // Modern cookie banner
const banner = document.createElement('div');
banner.innerHTML = `
                    <div class="fixed bottom-6 left-6 right-6 bg-surface p-6 rounded-2xl shadow-2xl z-50 max-w-md mx-auto border border-primary/20">
                        <div class="flex items-start space-x-4">
                            <div class="p-2 bg-yellow-100 rounded-xl">
                                <i class="fas fa-cookie-bite text-yellow-500 text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-dark mb-2">Cookies et confidentialité</h4>
                                <p class="text-sm text-gray-600 mb-4">www.assurance-pour-taxi.fr utilise des cookies pour vous offrir le meilleur service.</p>
                                <div class="flex space-x-2">
                                    <button onclick="acceptCookies()" class="bg-gradient-to-r from-yellow-400 to-yellow-500 text-dark px-4 py-2 rounded-xl text-sm font-medium transition-all hover:scale-105 shadow-md">
                                        <i class="fas fa-check mr-1"></i>J'accepte
                                    </button>
                                    <button onclick="this.closest('.fixed').remove()" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-xl text-sm transition-all hover:bg-gray-300">
                                        Refuser
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
document.body.appendChild(banner);
}
});

function acceptCookies() {
const expiryDate = new Date();
expiryDate.setMonth(expiryDate.getMonth() + 1);
document.cookie = 'aksamPerformance=1; path=/; expires=' + expiryDate.toGMTString();
document.querySelector('.fixed.bottom-6').remove();
}
	</script>

	<!-- JSON-LD -->
	<script type="application/ld+json">
		{
																																																																																																																																																																																																																																																																																																																																																																															        "@context": "http://schema.org",
																																																																																																																																																																																																																																																																																																																																																																															        "@type": "LocalBusiness",
																																																																																																																																																																																																																																																																																																																																																																															        "name": "Aksam Assurance",
																																																																																																																																																																																																																																																																																																																																																																															        "image": "assets/img/favicon.png",
																																																																																																																																																																																																																																																																																																																																																																															        "telephone": "01 82 83 48 00",
																																																																																																																																																																																																																																																																																																																																																																															        "address": {
																																																																																																																																																																																																																																																																																																																																																																															            "@type": "PostalAddress",
																																																																																																																																																																																																																																																																																																																																																																															            "streetAddress": "10 rue de Penthièvre",
																																																																																																																																																																																																																																																																																																																																																																															            "addressCountry": "FR",
																																																																																																																																																																																																																																																																																																																																																																															            "addressLocality": "PARIS",
																																																																																																																																																																																																																																																																																																																																																																															            "postalCode": "75008"
																																																																																																																																																																																																																																																																																																																																																																															        },
																																																																																																																																																																																																																																																																																																																																																																															        "url": "https://www.assurance-pour-taxi.fr",
																																																																																																																																																																																																																																																																																																																																																																															        "priceRange": "€€",
																																																																																																																																																																																																																																																																																																																																																																															        "openingHours": "Mo-Fr 09:00-18:00",
																																																																																																																																																																																																																																																																																																																																																																															        "contactPoint": {
																																																																																																																																																																																																																																																																																																																																																																															            "@type": "ContactPoint",
																																																																																																																																																																																																																																																																																																																																																																															            "telephone": "+33 1 82 83 48 00",
																																																																																																																																																																																																																																																																																																																																																																															            "contactType": "Customer Service",
																																																																																																																																																																																																																																																																																																																																																																															            "availableLanguage": ["French", "English"]
																																																																																																																																																																																																																																																																																																																																																																															        }
																																																																																																																																																																																																																																																																																																																																																																															    }
	</script>
{% endblock %}
